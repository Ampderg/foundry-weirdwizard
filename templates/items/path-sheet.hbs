<form class="{{cssClass}} sheet path-sheet" autocomplete="off">

  <div class="flexrow">

    {{!-- Left Column --}}
    <div class="left-col">

      {{!-- Header --}}
      <header class="sheet-header">
        <img class="profile-img" src="{{item.img}}" data-edit="img" title="{{item.name}}"/>
        <div class="header-fields">
          <h1 class="charname"><input name="name" type="text" value="{{item.name}}" placeholder="{{localize "WW.ItemName"}}"/></h1>

          <div>
            <select class="tier" name="system.tier">
                {{selectOptions tiers selected=system.tier localize=true}}
            </select>
          </div>
          
        </div>
      </header>

      {{!-- Description --}}
      {{editor system.description.enriched target="system.description.value" button=true owner=owner editable=editable}}

    </div>

    {{!-- Right Column --}}
    <div class="right-col">
      {{#each benefits as |benefit id|}}
        {{#if (ne benefit.levelReq 99)}}
        <div class="statbox{{#if (ne id 'benefit1')}} mt-2{{/if}}">
          
          {{!-- Header --}}
          <h3>{{localize "WW.Level"}} {{benefit.levelReq}}</h3>

          {{!-- Languages --}}
          <div class="stat-inline list-entries">
            <label>{{localize "WW.Languages.Label"}}</label>

            {{#each benefit.languages as |detail detailId|}}
            <div>
              
              <a data-tooltip="{{detail.desc}}">{{detail.name}}</a>
              
              <span class="buttons">
                <a class="array-button" data-action="edit" data-array="benefits.{{id}}.languages" data-entry-id="{{detailId}}"
                  title="{{localize "WW.Languages.Edit"}}"><i class="fas fa-edit"></i></a>
              
                <a class="array-button" data-action="remove" data-array="benefits.{{id}}.languages" data-entry-id="{{detailId}}"
                  title="{{localize "WW.Languages.Remove"}}"><i class="fas fa-trash"></i></a>
              </span>
              
              {{#unless @last}},{{/unless}}
            </div>
            {{/each}}
              
            {{#unless benefit.languages.length}}—{{/unless}}
              
            <a class="array-button" data-action="add" data-array="benefits.{{id}}.languages" data-loc="Languages"
              title="{{localize "WW.Languages.Add"}}"><i class="fas fa-circle-plus"></i></a>

          </div>

          {{!-- Stats --}}
          <div class="stat-inline flex-wrap">
            <span>
              <label>{{localize "WW.Defense.Armored"}}</label>
              +<input name="system.benefits.{{id}}.stats.armoredIncrease" type="number" value="{{benefit.stats.armoredIncrease}}" min="0" placeholder="0"/>
            </span>

            <span>
              <label>{{localize "WW.Defense.Natural"}}</label>
              +<input name="system.benefits.{{id}}.stats.naturalIncrease" type="number" value="{{benefit.stats.naturalIncrease}}" min="0" placeholder="0"/>
              = <input name="system.benefits.{{id}}.stats.naturalSet" type="number" value="{{benefit.stats.naturalSet}}" min="0" placeholder="0"/>
            </span>
            
            {{#if (and (eq @root.system.tier 'novice') (eq benefit.levelReq 1))}}
            <span>
              <label>{{localize "WW.Health.Starting"}}</label>
              <input name="system.benefits.{{id}}.stats.healthStarting" type="number" value="{{benefit.stats.healthStarting}}" min="1" placeholder="1"/>
            </span>
            {{else}}
            <span>
              <label>{{localize "WW.Health.Label"}}</label>
              +<input name="system.benefits.{{id}}.stats.healthIncrease" type="number" value="{{benefit.stats.healthIncrease}}" min="0" placeholder="0"/>
            </span>
            {{/if}}

            <span>
              <label>{{localize "WW.Speed.Label"}}</label>
              +<input name="system.benefits.{{id}}.stats.speedIncrease" type="number" value="{{benefit.stats.speedIncrease}}" min="0" placeholder="0"/>
            </span>

            <span>
              <label>{{localize "WW.Damage.Bonus"}}</label>
              +<input name="system.benefits.{{id}}.stats.bonusDamage" type="number" value="{{benefit.stats.bonusDamage}}" min="0" placeholder="0"/>
            </span>
          </div>

          {{!-- Magic --}}
          <div class="stat-inline flex-wrap">

            {{!-- Traditions --}}
            <div class="list-entries">
              <label>{{localize "WW.Traditions.Label"}}</label>

              {{#each benefit.traditions as |detail detailId|}}
              <div>
              
                <a data-tooltip="{{detail.desc}}">{{detail.name}}</a>
              
                <span class="buttons">
                  <a class="array-button" data-action="edit" data-array="benefits.{{id}}.traditions" data-entry-id="{{detailId}}"
                    title="{{localize "WW.Traditions.Edit"}}"><i class="fas fa-edit"></i></a>
              
                  <a class="array-button" data-action="remove" data-array="benefits.{{id}}.traditions" data-entry-id="{{detailId}}"
                    title="{{localize "WW.Traditions.Remove"}}"><i class="fas fa-trash"></i></a>
                </span>
              
                {{#unless @last}},{{/unless}}
              </div>
              {{/each}}
              
              {{#unless benefit.traditions.length}}—{{/unless}}
              
              <a class="array-button" data-action="add" data-array="benefits.{{id}}.traditions" data-loc="Traditions"
                title="{{localize "WW.Traditions.Add"}}"><i class="fas fa-circle-plus"></i></a>

            </div>

            {{!-- Spells --}}
            <div>
              <label>{{localize "WW.Spells.Label"}}</label>
              
              <select name="system.benefits.{{id}}.spells">
                {{selectOptions @root.spellsLearned selected=benefit.spells localize=true}}
              </select>
            </div>

          </div>

          <ol class="described-list items-area {{id}}">
            {{#unless benefit.itemsInfo}}{{localize "WW.CharOption.DropHere"}}{{/unless}}
            
            {{#each benefit.itemsInfo as |item id|}}
            <li class="path-item item{{#if item.missing}} missing{{/if}}" data-item-uuid="{{item.uuid}}">
              <label>{{item.name}}</label>

              <span class="buttons">
                {{#unless item.missing}}<a class="ref-edit" title="{{localize "WW.CharOption.EditRef"}}"><i class="fas fa-edit"></i></a>{{/unless}}
                <a class="ref-remove" title="{{localize "WW.CharOption.RemoveRef"}}"><i class="fas fa-trash"></i></a>
              </span>

              <span>{{{item.description}}}</span>
            </li>
            {{/each}}
          </ol>
          
        </div>
        {{/if}}
      {{/each}}
    </div>

  </div>
  
</form>